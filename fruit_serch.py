from urllib.parse import parse_qsl, parse_qs
import datetime
from linebot_import_api import *

def fruit_serch(event):
    message = TemplateSendMessage(
        alt_text='搜尋',
        template=CarouselTemplate(
            columns=[
                CarouselColumn(
                    thumbnail_image_url='https://image.photocnc.com/aoaodcom/2019-12/02/201912020821142d3d4289efc52d7c211dab77593e4c69.jpg.h700.webp',
                    title='漿果類',
                    text='請選擇想查詢的水果',
                    actions=[
                        PostbackAction(
                            label='草莓',
                            display_text='查詢草莓',
                            data='action=查詢草莓'
                        ),
                        PostbackAction(
                            label='奇異果',
                            display_text='查詢奇異果',
                            data='action=查詢奇異果'
                        ),
                        PostbackAction(
                            label='藍莓',
                            display_text='查詢藍莓',
                            data='action=查詢藍莓'
                        )
                    ]
                ),
                CarouselColumn(
                    thumbnail_image_url='https://rimage.gnst.jp/livejapan.com/public/article/detail/a/00/04/a0004880/img/basic/a0004880_main.jpg?20210419173506&q=80&rw=750&rh=536',
                    title='瓜果類',
                    text='請選擇想查詢的水果',
                    actions=[
                        PostbackAction(
                            label='西瓜',
                            display_text='查詢西瓜',
                            data='action=查詢西瓜'
                        ),
                        PostbackAction(
                            label='哈密瓜',
                            display_text='查詢哈密瓜',
                            data='action=查詢哈密瓜'
                        ),
                        PostbackAction(
                            label='木瓜',
                            display_text='查詢木瓜',
                            data='action=查詢木瓜'
                        )
                    ]
                ),
                CarouselColumn(
                    thumbnail_image_url='https://s.newtalk.tw/album/album/1/5dc53aef9b943.jpg',
                    title='柑橘類',
                    text='請選擇想查詢的水果',
                    actions=[
                        PostbackAction(
                            label='柳丁',
                            display_text='查詢柳丁',
                            data='action=查詢柳丁'
                        ),
                        PostbackAction(
                            label='檸檬',
                            display_text='查詢檸檬',
                            data='action=查詢檸檬'
                        ),
                        PostbackAction(
                            label='柚子',
                            display_text='查詢柚子',
                            data='action=查詢柚子'
                        )
                    ]
                ),
                CarouselColumn(
                    thumbnail_image_url='https://uc.udn.com.tw/photo/2019/05/21/realtime/6329918.png',
                    title='梨果類',
                    text='請選擇想查詢的水果',
                    actions=[
                        PostbackAction(
                            label='蘋果',
                            display_text='查詢蘋果',
                            data='action=查詢蘋果'
                        ),
                        PostbackAction(
                            label='楊桃',
                            display_text='查詢楊桃',
                            data='action=查詢楊桃'
                        ),
                        PostbackAction(
                            label='梨子',
                            display_text='查詢梨子',
                            data='action=查詢梨子'
                        )
                    ]
                ),
                CarouselColumn(
                    thumbnail_image_url='https://pgw.udn.com.tw/gw/photo.php?u=https://uc.udn.com.tw/photo/2021/07/15/1/13042728.jpg&s=Y&x=64&y=6&sw=1181&sh=787&exp=3600',
                    title='核果類',
                    text='請選擇想查詢的水果',
                    actions=[
                        PostbackAction(
                            label='水蜜桃',
                            display_text='查詢水蜜桃',
                            data='action=查詢水蜜桃'
                        ),
                        PostbackAction(
                            label='李子',
                            display_text='查詢李子',
                            data='action=查詢李子'
                        ),
                        PostbackAction(
                            label='櫻桃',
                            display_text='查詢櫻桃',
                            data='action=查詢櫻桃'
                        )
                    ]
                ),
                CarouselColumn(
                    thumbnail_image_url='https://images.chinatimes.com/newsphoto/2021-02-28/656/B01A00_P_01_03.jpg',
                    title='熱帶水果',
                    text='請選擇想查詢的水果',
                    actions=[
                        PostbackAction(
                            label='鳳梨',
                            display_text='查詢鳳梨',
                            data='action=查詢鳳梨'
                        ),
                        PostbackAction(
                            label='香蕉',
                            display_text='查詢香蕉',
                            data='action=查詢香蕉'
                        ),
                        PostbackAction(
                            label='蓮霧',
                            display_text='查詢蓮霧',
                            data='action=查詢蓮霧'
                        )
                    ]
                ),
            ]
        )
    )
    line_bot_api.reply_message(event.reply_token, message)
